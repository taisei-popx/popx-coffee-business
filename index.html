<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>popx coffee lab â€” Business Structure & Revenue Simulation</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root {
    --color-navy: #243668;
    --color-pink: #ff9fb4;
    --color-cyan: #7af2e0;
    --color-bg: #fcfcfc;
    --color-text: #4b3e3c;
    --font-heading: 'Montserrat', 'Noto Sans JP', sans-serif;
    --font-body: 'Noto Sans JP', sans-serif;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: var(--font-body);
    background: var(--color-bg);
    color: var(--color-text);
    letter-spacing: 0.05em;
    font-feature-settings: "palt" 1;
    padding-top: 80px;
}

/* Header */
header {
    background: #fff;
    color: var(--color-text);
    padding: 20px 0;
    text-align: center;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
}
header h1 { font-family: var(--font-heading); font-size: 22px; font-weight: 800; letter-spacing: 0.15em; color: var(--color-navy); }
header p { font-size: 13px; opacity: 0.7; margin-top: 4px; }
header .hub-link {
    position: absolute;
    left: 24px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    color: var(--color-navy);
    text-decoration: none;
    border: 1px solid rgba(36, 54, 104, 0.3);
    padding: 6px 12px;
    border-radius: 100vh;
    transition: all 0.2s;
}
header .hub-link:hover {
    background: rgba(36, 54, 104, 0.05);
    border-color: var(--color-navy);
}

/* Container */
.container { max-width: 1200px; margin: 0 auto; padding: 24px 16px; }

/* Section titles */
.section-title {
    font-family: var(--font-heading);
    font-size: 13px;
    font-weight: 700;
    color: var(--color-navy);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--color-cyan);
}

/* Tabs */
.tab-bar {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
    flex-wrap: wrap;
}
.tab-btn {
    font-family: var(--font-heading);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    padding: 8px 20px;
    border-radius: 100vh;
    border: 1px solid rgba(36, 54, 104, 0.2);
    background: white;
    color: var(--color-navy);
    cursor: pointer;
    transition: all 0.2s;
}
.tab-btn:hover { border-color: var(--color-navy); background: rgba(36, 54, 104, 0.03); }
.tab-btn.active {
    background: var(--color-navy);
    color: white;
    border-color: var(--color-navy);
}

/* Cards */
.card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    border: 1px solid rgba(0,0,0,0.08);
    margin-bottom: 20px;
}
.card h3 {
    font-family: var(--font-heading);
    font-size: 13px;
    font-weight: 700;
    color: var(--color-navy);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 16px;
}
.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-bottom: 20px; }

/* Structure table */
.struct-table { width: 100%; border-collapse: collapse; font-size: 14px; }
.struct-table th {
    background: #f8f9fc;
    padding: 10px 14px;
    text-align: left;
    font-family: var(--font-heading);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.06em;
    color: var(--color-navy);
    border-bottom: 2px solid rgba(36,54,104,0.1);
}
.struct-table td {
    padding: 10px 14px;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    line-height: 1.6;
}
.struct-table tr:last-child td { border-bottom: none; }

/* Badge */
.badge {
    display: inline-block;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.05em;
    padding: 3px 10px;
    border-radius: 100vh;
    font-family: var(--font-heading);
}
.badge-popx { background: var(--color-navy); color: white; }
.badge-greekee { background: var(--color-pink); color: white; }
.badge-shared { background: var(--color-cyan); color: var(--color-navy); }

/* Revenue split bars */
.split-bar-container { margin: 8px 0; }
.split-bar {
    display: flex;
    height: 32px;
    border-radius: 8px;
    overflow: hidden;
    font-size: 11px;
    font-weight: 700;
    font-family: var(--font-heading);
}
.split-popx {
    background: var(--color-navy);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: width 0.4s ease;
}
.split-greekee {
    background: var(--color-pink);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: width 0.4s ease;
}
.split-label {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: #999;
    margin-top: 4px;
}

/* Cost rows */
.cost-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0; font-size: 14px; }
.cost-row:last-child { border-bottom: none; }
.cost-label { color: #666; }
.cost-value { font-weight: 700; color: var(--color-navy); }
.cost-value.red { color: #e74c3c; }
.cost-value.green { color: #059669; }
.cost-total { background: #f8f9fc; margin: 12px -24px -24px; padding: 16px 24px; border-radius: 0 0 16px 16px; }
.cost-total .cost-row { border: none; font-size: 16px; }

/* Controls */
.control-group { margin-bottom: 16px; }
.control-label { font-size: 12px; font-weight: 600; color: #666; margin-bottom: 6px; display: flex; justify-content: space-between; }
.control-val { color: var(--color-navy); font-size: 14px; font-weight: 700; }
input[type="range"] {
    width: 100%; height: 6px; -webkit-appearance: none; appearance: none;
    background: #e0e0e0; border-radius: 3px; outline: none;
}
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%;
    background: var(--color-navy); cursor: pointer; border: 3px solid white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* Result banner */
.result-banner {
    background: linear-gradient(135deg, var(--color-navy), #1a284d);
    color: white; border-radius: 16px; padding: 32px;
    text-align: center; margin: 24px 0;
}
.result-banner h2 { font-family: var(--font-heading); font-size: 13px; letter-spacing: 0.1em; opacity: 0.8; margin-bottom: 8px; }
.result-big { font-family: var(--font-heading); font-size: 40px; font-weight: 800; }
.result-big.positive { color: var(--color-cyan); }
.result-big.negative { color: var(--color-pink); }
.result-sub { font-size: 13px; opacity: 0.7; margin-top: 8px; }
.result-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 24px; }
.result-item { text-align: center; }
.result-item .ri-val { font-family: var(--font-heading); font-size: 22px; font-weight: 700; }
.result-item .ri-label { font-size: 11px; opacity: 0.6; margin-top: 2px; }

/* Pattern cards */
.pattern-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 20px; margin: 20px 0; }
.pattern-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    border: 2px solid rgba(0,0,0,0.06);
    transition: all 0.3s;
    cursor: pointer;
}
.pattern-card:hover { border-color: var(--color-cyan); }
.pattern-card.active { border-color: var(--color-navy); box-shadow: 0 4px 20px rgba(36,54,104,0.12); }
.pattern-label {
    font-family: var(--font-heading);
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: white;
    background: var(--color-navy);
    display: inline-block;
    padding: 3px 12px;
    border-radius: 100vh;
    margin-bottom: 12px;
}
.pattern-title {
    font-family: var(--font-heading);
    font-size: 18px;
    font-weight: 800;
    color: var(--color-navy);
    margin-bottom: 8px;
}
.pattern-desc {
    font-size: 13px;
    line-height: 1.7;
    color: #666;
    margin-bottom: 16px;
}

/* Flow diagram */
.flow-container {
    background: white;
    border-radius: 16px;
    padding: 28px;
    border: 1px solid rgba(0,0,0,0.08);
    margin-bottom: 20px;
    overflow-x: auto;
}
.flow-diagram {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    min-width: 600px;
    padding: 20px 0;
    flex-wrap: nowrap;
}
.flow-box {
    padding: 14px 18px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    text-align: center;
    min-width: 120px;
    line-height: 1.5;
}
.flow-revenue { background: #e8f5e9; border: 1px solid #a5d6a7; color: #2e7d32; }
.flow-topoff { background: #fff3e0; border: 1px solid #ffcc80; color: #e65100; }
.flow-profit { background: #e3f2fd; border: 1px solid #90caf9; color: #1565c0; }
.flow-popx { background: var(--color-navy); color: white; }
.flow-greekee { background: var(--color-pink); color: white; }
.flow-arrow {
    font-size: 20px;
    color: #ccc;
    flex-shrink: 0;
}

/* Scenario comparison */
.scenario-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
@media (max-width: 768px) {
    .scenario-grid { grid-template-columns: 1fr; }
    .flow-diagram { min-width: 500px; }
    .result-grid { grid-template-columns: 1fr 1fr; }
    .pattern-grid { grid-template-columns: 1fr; }
}

/* Tab panels */
.tab-panel { display: none; }
.tab-panel.active { display: block; }

/* Summary stat */
.stat-row {
    display: flex;
    gap: 16px;
    margin: 16px 0;
    flex-wrap: wrap;
}
.stat-box {
    flex: 1;
    min-width: 140px;
    background: #f8f9fc;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}
.stat-box .stat-num {
    font-family: var(--font-heading);
    font-size: 24px;
    font-weight: 800;
    color: var(--color-navy);
}
.stat-box .stat-label {
    font-size: 11px;
    color: #999;
    margin-top: 4px;
}

/* 12-month table */
.monthly-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 16px; }
.monthly-table th {
    background: var(--color-navy);
    color: white;
    padding: 8px 6px;
    text-align: right;
    font-family: var(--font-heading);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.05em;
}
.monthly-table th:first-child { text-align: left; border-radius: 8px 0 0 0; }
.monthly-table th:last-child { border-radius: 0 8px 0 0; }
.monthly-table td {
    padding: 7px 6px;
    text-align: right;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    font-variant-numeric: tabular-nums;
}
.monthly-table td:first-child { text-align: left; font-weight: 600; color: var(--color-navy); }
.monthly-table tr:last-child td { font-weight: 700; background: #f8f9fc; }
.monthly-table .positive { color: #059669; }
.monthly-table .negative { color: #e74c3c; }

/* Note box */
.note-box {
    background: #fffbf0;
    border: 1px solid #ffe0a0;
    border-radius: 12px;
    padding: 16px 20px;
    font-size: 13px;
    line-height: 1.7;
    margin: 16px 0;
    color: #8a6d3b;
}

/* S2 Ready Badge */
.badge-s2-ready {
    display: inline-block;
    background: #059669;
    color: white;
    font-size: 10px;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: 100vh;
    font-family: var(--font-heading);
}

/* Phase Timeline */
.phase-timeline {
    display: flex;
    align-items: center;
    gap: 16px;
    margin: 24px 0;
    flex-wrap: wrap;
}
.phase-box {
    flex: 1;
    min-width: 180px;
    background: white;
    border-radius: 12px;
    padding: 20px;
    border: 2px solid rgba(0,0,0,0.08);
    text-align: center;
}
.phase-box.s1 { border-color: var(--color-navy); }
.phase-box.s2 { border-color: var(--color-cyan); }
.phase-box.s3 { border-color: var(--color-pink); }
.phase-box h4 {
    font-family: var(--font-heading);
    font-size: 12px;
    font-weight: 700;
    color: var(--color-navy);
    margin-bottom: 8px;
}
.phase-box p {
    font-size: 12px;
    color: #666;
    line-height: 1.5;
}
.phase-arrow {
    font-size: 24px;
    color: #ccc;
    flex-shrink: 0;
}

/* Formula display */
.formula-box {
    background: #f8f9fc;
    border-radius: 8px;
    padding: 12px 16px;
    font-size: 12px;
    font-family: 'Courier New', monospace;
    color: var(--color-navy);
    margin: 8px 0;
    line-height: 1.6;
}

/* Split card with formula */
.split-card {
    background: #f8f9fc;
    border-radius: 12px;
    padding: 16px;
    margin: 12px 0;
}
.split-card-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--color-navy);
    margin-bottom: 8px;
}
.split-card-formula {
    font-size: 12px;
    font-family: 'Courier New', monospace;
    color: #666;
    margin-bottom: 8px;
}
.split-card-result {
    font-size: 14px;
    font-weight: 700;
    color: var(--color-navy);
}
</style>
</head>
<body>

<header>
    <a href="https://taisei-popx.github.io/popx-beans-manager/08_POPX_Coffee_Hub.html" class="hub-link">â† Hub</a>
    <h1>BUSINESS STRUCTURE</h1>
    <p>popx coffee lab Ã— greekee â€” Partnership Model</p>
</header>

<div class="container">

    <!-- TAB BAR -->
    <div class="tab-bar">
        <button class="tab-btn active" onclick="showTab('structure')">Business Structure</button>
        <button class="tab-btn" onclick="showTab('simulation')">é–“å€Ÿã‚Š Revenue Sim</button>
        <button class="tab-btn" onclick="showTab('yearly')">12-Month Forecast</button>
        <button class="tab-btn" onclick="showTab('recovery')">Investment Recovery</button>
    </div>

    <!-- ==================== TAB 1: BUSINESS STRUCTURE ==================== -->
    <div class="tab-panel active" id="tab-structure">

        <div class="section-title">Partnership Overview</div>

        <div class="card-grid">
            <div class="card">
                <h3>POPX Inc.</h3>
                <div class="cost-row"><span class="cost-label">Role</span><span class="cost-value">äº‹æ¥­é‹å–¶ãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–</span></div>
                <div class="cost-row"><span class="cost-label">äº‹æ¥­å½¢æ…‹</span><span class="cost-value">POPXåˆ¥äº‹æ¥­éƒ¨</span></div>
                <div class="cost-row"><span class="cost-label">æ‹…å½“é ˜åŸŸ</span><span class="cost-value">ã‚³ãƒ¼ãƒ’ãƒ¼äº‹æ¥­å…¨èˆ¬</span></div>
                <div class="cost-row"><span class="cost-label">ã‚°ãƒƒã‚ºåˆ¶ä½œ</span><span class="cost-value">vanitystoreå®Ÿç¸¾ã‚ã‚Š</span></div>
                <div class="cost-row"><span class="cost-label">ãƒã‚¤ã‚¨ãƒ³ãƒ‰å§”è¨—</span><span class="cost-value">pattythreeï¼ˆå–ç· å½¹é–¢é€£ä¼šç¤¾ï¼‰</span></div>
                <div class="cost-row"><span class="cost-label">æŠ•è³‡</span><span class="cost-value">æ©Ÿæãƒ»è±†ä»•å…¥ã‚Œç«‹æ›¿</span></div>
            </div>
            <div class="card">
                <h3>greekee</h3>
                <div class="cost-row"><span class="cost-label">Role</span><span class="cost-value">IPæä¾›ãƒ»å ´æ‰€æä¾›</span></div>
                <div class="cost-row"><span class="cost-label">æ³•çš„é–¢ä¿‚</span><span class="cost-value">åˆ¥æ³•äºº</span></div>
                <div class="cost-row"><span class="cost-label">IPæ‰€æœ‰</span><span class="cost-value">ã‚°ãƒ¼ã‚°ãƒ¼ï¼†ãƒªãƒª</span></div>
                <div class="cost-row"><span class="cost-label">å ´æ‰€æä¾›</span><span class="cost-value">ä¸­ç›®é»’åº—èˆ—ã®é–“å€Ÿã‚Š</span></div>
                <div class="cost-row"><span class="cost-label">ãƒãƒªã‚¹ã‚¿</span><span class="cost-value">é›‡ç”¨ãƒ»å¥‘ç´„ç®¡ç†</span></div>
                <div class="cost-row"><span class="cost-label">ã‚³ã‚¹ãƒˆè² æ‹…</span><span class="cost-value">ãƒãƒªã‚¹ã‚¿äººä»¶è²»ï¼ˆæ¥­å‹™å§”è¨—ï¼‰</span></div>
            </div>
        </div>

        <!-- Revenue Flow -->
        <div class="section-title">Revenue Flow</div>

        <div class="flow-container">
            <h3 style="font-family:var(--font-heading);font-size:13px;font-weight:700;color:var(--color-navy);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:16px;">Revenue â†’ Top-off â†’ Profit Split</h3>
            <div class="flow-diagram">
                <div class="flow-box flow-revenue">å£²ä¸Š<br><small>ã‚«ãƒ•ã‚§ / ã‚°ãƒƒã‚º</small></div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-box flow-topoff">ãƒˆãƒƒãƒ—ã‚ªãƒ•<br><small>å…±é€šäº‹æ¥­ã‚³ã‚¹ãƒˆ</small></div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-box flow-profit">äº‹æ¥­åˆ©ç›Š<br><small>Gross Profit</small></div>
                <div class="flow-arrow">â†’</div>
                <div style="display:flex;flex-direction:column;gap:8px;">
                    <div class="flow-box flow-popx">POPX<br><small>80% / 70%</small></div>
                    <div class="flow-box flow-greekee">greekee<br><small>20% / 30%</small></div>
                </div>
            </div>
        </div>

        <!-- Top-off items -->
        <div class="card">
            <h3>ãƒˆãƒƒãƒ—ã‚ªãƒ•é …ç›®ï¼ˆå£²ä¸Šã‹ã‚‰æ§é™¤ï¼‰</h3>
            <table class="struct-table">
                <thead>
                    <tr>
                        <th>é …ç›®</th>
                        <th>å†…å®¹</th>
                        <th>è² æ‹…è€…</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ã‚³ãƒ¼ãƒ’ãƒ¼è±†ä»•å…¥ã‚Œ</td>
                        <td>COGS â€” ä»•å…¥ã‚Œä¼ç¥¨ãƒ™ãƒ¼ã‚¹</td>
                        <td>POPXç«‹æ›¿</td>
                        <td><span class="badge badge-shared">TOP-OFF</span></td>
                    </tr>
                    <tr>
                        <td>ã‚°ãƒƒã‚ºè£½é€ è²»</td>
                        <td>COGS â€” è£½é€ ç™ºæ³¨æ›¸ãƒ™ãƒ¼ã‚¹</td>
                        <td>ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹</td>
                        <td><span class="badge badge-shared">TOP-OFF</span></td>
                    </tr>
                    <tr>
                        <td>å®¶è³ƒ</td>
                        <td>greekeeã¸ã®æœˆé¡å›ºå®šæ”¯æ‰•ã„</td>
                        <td>å£²ä¸Šã‹ã‚‰æ§é™¤</td>
                        <td><span class="badge badge-shared">TOP-OFF</span></td>
                    </tr>
                    <tr>
                        <td>ãƒãƒªã‚¹ã‚¿æ¥­å‹™å§”è¨—è²»</td>
                        <td>greekeeé›‡ç”¨ â†’ POPXã¸æœˆé¡è«‹æ±‚</td>
                        <td>greekeeé›‡ç”¨</td>
                        <td><span class="badge badge-shared">TOP-OFF</span></td>
                    </tr>
                    <tr>
                        <td>æ¶ˆè€—å“ãƒ»æ‰‹æ•°æ–™</td>
                        <td>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ã‚«ãƒƒãƒ—ã€ECæ‰‹æ•°æ–™ç­‰</td>
                        <td>ä¼ç¥¨ãƒ™ãƒ¼ã‚¹</td>
                        <td><span class="badge badge-shared">TOP-OFF</span></td>
                    </tr>
                    <tr>
                        <td style="color:#999;">æ©Ÿæï¼ˆè¨­å‚™æŠ•è³‡ï¼‰</td>
                        <td style="color:#999;">ã‚¨ã‚¹ãƒ—ãƒ¬ãƒƒã‚½ãƒã‚·ãƒ³ã€ã‚°ãƒ©ã‚¤ãƒ³ãƒ€ãƒ¼ç­‰</td>
                        <td style="color:#999;">POPXæŠ•è³‡</td>
                        <td><span class="badge badge-popx">POPXè² æ‹…</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Revenue Split -->
        <div class="section-title">Revenue Split</div>

        <div class="card">
            <h3>ã‚«ãƒ•ã‚§äº‹æ¥­åˆ©ç›Š</h3>
            <div class="split-bar-container">
                <div class="split-bar">
                    <div class="split-popx" style="width:80%">POPX 80%</div>
                    <div class="split-greekee" style="width:20%">greekee 20%</div>
                </div>
                <div class="split-label">
                    <span>äº‹æ¥­é‹å–¶ãƒ»æŠ•è³‡ãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–</span>
                    <span>å ´æ‰€æä¾›ãƒ»ä¸–ç•Œè¦³</span>
                </div>
            </div>
        </div>

        <div class="pattern-grid">
            <div class="card" style="margin-bottom:0;">
                <h3>ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š â€” Pattern A</h3>
                <p style="font-size:13px;color:#666;margin-bottom:16px;line-height:1.6;">POPXã¯ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«é–‹ç™ºã®ã¿ã€‚<br>ã‚°ãƒƒã‚ºè£½é€ ãƒ»åœ¨åº«ãƒ»è²©å£²ã¯greekeeå´ã€‚</p>
                <div class="split-bar-container">
                    <div class="split-bar">
                        <div class="split-popx" style="width:20%">20%</div>
                        <div class="split-greekee" style="width:80%">greekee 80%</div>
                    </div>
                    <div class="split-label">
                        <span>ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–è²»</span>
                        <span>IP + è£½é€  + è²©å£²ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</span>
                    </div>
                </div>
            </div>
            <div class="card" style="margin-bottom:0;">
                <h3>ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š â€” Pattern B</h3>
                <p style="font-size:13px;color:#666;margin-bottom:16px;line-height:1.6;">POPXãŒä¼ç”»ãƒ»åˆ¶ä½œãƒ»åœ¨åº«ãƒ»è²©å£²ã‚’å…¨ã¦æ‹…å½“ã€‚<br>vanitystore / pattythree ã®ãƒã‚¦ãƒã‚¦æ´»ç”¨ã€‚</p>
                <div class="split-bar-container">
                    <div class="split-bar">
                        <div class="split-popx" style="width:70%">POPX 70%</div>
                        <div class="split-greekee" style="width:30%">30%</div>
                    </div>
                    <div class="split-label">
                        <span>ä¼ç”» + åˆ¶ä½œ + åœ¨åº« + è²©å£²</span>
                        <span>IPãƒ©ã‚¤ã‚»ãƒ³ã‚¹</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="note-box" style="margin-top:20px;">
            <strong>å››åŠæœŸP&Lãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š</strong>POPXãƒ»greekeeä¸¡ç¤¾ã§å››åŠæœŸã”ã¨ã«P&Lãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã€‚ãƒˆãƒƒãƒ—ã‚ªãƒ•é …ç›®ã®é©æ­£æ€§ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ã€‚
        </div>

    </div>

    <!-- ==================== TAB 2: SIMULATION ==================== -->
    <div class="tab-panel" id="tab-simulation">

        <div class="section-title">é–“å€Ÿã‚Šãƒ¢ãƒ‡ãƒ« â€” Revenue Simulation</div>

        <div class="note-box">
            greekeeä¸­ç›®é»’åº—èˆ—å†…ã§ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å‹ã‚«ãƒ•ã‚§é‹å–¶ã‚’æƒ³å®šã€‚ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã—ã¦ã€å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½±éŸ¿ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
        </div>

        <!-- Cafe Parameters -->
        <div class="card-grid">
            <div class="card">
                <h3>â˜• ã‚«ãƒ•ã‚§ â€” ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                <div class="control-group">
                    <div class="control-label"><span>å–¶æ¥­æ—¥æ•° / æœˆ</span><span class="control-val" id="v-days">20</span></div>
                    <input type="range" id="s-days" min="8" max="28" value="20" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>1æ—¥ã‚ãŸã‚Šæ¯æ•°</span><span class="control-val" id="v-cups">18</span></div>
                    <input type="range" id="s-cups" min="5" max="40" value="18" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>å¹³å‡å˜ä¾¡ï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼ï¼‰</span><span class="control-val" id="v-price">Â¥1,800</span></div>
                    <input type="range" id="s-price" min="800" max="4000" step="100" value="1800" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>è±†åŸä¾¡ / æ¯</span><span class="control-val" id="v-bean">Â¥450</span></div>
                    <input type="range" id="s-bean" min="200" max="900" step="10" value="450" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>ãã®ä»–åŸä¾¡ / æ¯ï¼ˆæ°´ãƒ»ã‚«ãƒƒãƒ—ç­‰ï¼‰</span><span class="control-val" id="v-other">Â¥50</span></div>
                    <input type="range" id="s-other" min="20" max="150" step="10" value="50" oninput="simulate()">
                </div>
            </div>

            <div class="card">
                <h3>ğŸ  å›ºå®šã‚³ã‚¹ãƒˆï¼ˆãƒˆãƒƒãƒ—ã‚ªãƒ•ï¼‰</h3>
                <div class="control-group">
                    <div class="control-label"><span>å®¶è³ƒï¼ˆgreekeeã¸æœˆé¡å›ºå®šï¼‰</span><span class="control-val" id="v-rent">Â¥80,000</span></div>
                    <input type="range" id="s-rent" min="30000" max="200000" step="5000" value="80000" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>ãƒãƒªã‚¹ã‚¿æ¥­å‹™å§”è¨—è²» / æœˆ</span><span class="control-val" id="v-barista">Â¥120,000</span></div>
                    <input type="range" id="s-barista" min="50000" max="300000" step="5000" value="120000" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>æ¶ˆè€—å“ãƒ»é›‘è²» / æœˆ</span><span class="control-val" id="v-misc">Â¥30,000</span></div>
                    <input type="range" id="s-misc" min="10000" max="80000" step="5000" value="30000" oninput="simulate()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>é€æ–™ãƒ»é–¢ç¨ / æœˆ</span><span class="control-val" id="v-shipping">Â¥20,000</span></div>
                    <input type="range" id="s-shipping" min="5000" max="50000" step="5000" value="20000" oninput="simulate()">
                </div>
            </div>
        </div>

        <!-- Goods Parameters -->
        <div class="card">
            <h3>ğŸ ã‚°ãƒƒã‚ºäº‹æ¥­ â€” ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
            <div class="card-grid" style="margin-bottom:0;">
                <div>
                    <div class="control-group">
                        <div class="control-label"><span>ã‚°ãƒƒã‚ºæœˆé–“å£²ä¸Š</span><span class="control-val" id="v-goods-rev">Â¥200,000</span></div>
                        <input type="range" id="s-goods-rev" min="0" max="1000000" step="10000" value="200000" oninput="simulate()">
                    </div>
                    <div class="control-group">
                        <div class="control-label"><span>ã‚°ãƒƒã‚ºåŸä¾¡ç‡</span><span class="control-val" id="v-goods-cogs">35%</span></div>
                        <input type="range" id="s-goods-cogs" min="15" max="60" value="35" oninput="simulate()">
                    </div>
                </div>
                <div>
                    <div style="margin-bottom: 16px;">
                        <label style="font-size:12px;font-weight:600;color:#666;display:block;margin-bottom:8px;">ã‚°ãƒƒã‚ºãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ</label>
                        <div style="display:flex;gap:8px;">
                            <button class="tab-btn active" id="btn-patA" onclick="setGoodsPattern('A')">Pattern A (20/80)</button>
                            <button class="tab-btn" id="btn-patB" onclick="setGoodsPattern('B')">Pattern B (70/30)</button>
                        </div>
                    </div>
                    <div class="note-box" id="pattern-desc" style="margin:0;">
                        <strong>Pattern Aï¼š</strong>POPXã¯ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã®ã¿ã€‚greekeeãŒã‚°ãƒƒã‚ºè£½é€ ãƒ»è²©å£²ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
                    </div>
                </div>
            </div>
        </div>

        <!-- RESULTS -->
        <div class="result-banner" id="result-banner">
            <h2>MONTHLY BUSINESS PROFIT</h2>
            <div class="result-big positive" id="r-total">Â¥0</div>
            <div class="result-sub" id="r-total-sub">ã‚«ãƒ•ã‚§ + ã‚°ãƒƒã‚º åˆè¨ˆäº‹æ¥­åˆ©ç›Š</div>
            <div class="result-grid">
                <div class="result-item">
                    <div class="ri-val" id="r-cafe-profit" style="color:var(--color-cyan)">Â¥0</div>
                    <div class="ri-label">ã‚«ãƒ•ã‚§äº‹æ¥­åˆ©ç›Š</div>
                </div>
                <div class="result-item">
                    <div class="ri-val" id="r-goods-profit" style="color:var(--color-pink)">Â¥0</div>
                    <div class="ri-label">ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š</div>
                </div>
            </div>
        </div>

        <!-- Split Results with Formulas -->
        <div class="scenario-grid">
            <div class="card">
                <h3 style="color:var(--color-navy);">POPX â€” æœˆé–“åç›Š</h3>
                <div class="split-card">
                    <div class="split-card-label">ã‚«ãƒ•ã‚§äº‹æ¥­åˆ†é…</div>
                    <div class="split-card-formula" id="f-popx-cafe-formula">å¼</div>
                    <div class="split-card-result" id="r-popx-cafe">Â¥0</div>
                </div>
                <div class="split-card">
                    <div class="split-card-label">ã‚°ãƒƒã‚ºäº‹æ¥­åˆ†é…</div>
                    <div class="split-card-formula" id="f-popx-goods-formula">å¼</div>
                    <div class="split-card-result" id="r-popx-goods">Â¥0</div>
                </div>
                <div class="cost-total">
                    <div class="cost-row"><span class="cost-label">POPX æœˆé–“åˆè¨ˆ</span><span class="cost-value green" id="r-popx-total" style="font-size:20px;">Â¥0</span></div>
                </div>
            </div>
            <div class="card">
                <h3 style="color:var(--color-pink);">greekee â€” æœˆé–“åç›Š</h3>
                <div class="split-card">
                    <div class="split-card-label">ã‚«ãƒ•ã‚§äº‹æ¥­åˆ†é…</div>
                    <div class="split-card-formula" id="f-gk-cafe-formula">å¼</div>
                    <div class="split-card-result" id="r-gk-cafe">Â¥0</div>
                </div>
                <div class="split-card">
                    <div class="split-card-label">ã‚°ãƒƒã‚ºäº‹æ¥­åˆ†é…</div>
                    <div class="split-card-formula" id="f-gk-goods-formula">å¼</div>
                    <div class="split-card-result" id="r-gk-goods">Â¥0</div>
                </div>
                <div style="border-top: 1px solid rgba(0,0,0,0.08); padding-top: 12px; margin-top: 12px;">
                    <div style="font-size: 12px; font-weight: 600; color: var(--color-navy); margin-bottom: 8px;">å›ºå®šåå…¥ï¼ˆãƒˆãƒƒãƒ—ã‚ªãƒ•çµŒç”±ï¼‰</div>
                    <div class="cost-row" style="margin-bottom: 8px;"><span class="cost-label">å®¶è³ƒåå…¥</span><span class="cost-value" id="r-gk-rent">Â¥0</span></div>
                    <div class="cost-row"><span class="cost-label">ãƒãƒªã‚¹ã‚¿æ¥­å‹™å§”è¨—åå…¥</span><span class="cost-value" id="r-gk-barista">Â¥0</span></div>
                </div>
                <div class="cost-total">
                    <div class="cost-row"><span class="cost-label">greekee æœˆé–“åˆè¨ˆ</span><span class="cost-value green" id="r-gk-total" style="font-size:20px;">Â¥0</span></div>
                </div>
            </div>
        </div>

        <!-- P&L Waterfall with S2 Pool -->
        <div class="card">
            <h3>P&L Waterfallï¼ˆæœˆæ¬¡ï¼‰</h3>
            <div class="cost-row"><span class="cost-label">ã‚«ãƒ•ã‚§å£²ä¸Š</span><span class="cost-value" id="w-cafe-rev">Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” è±†åŸä¾¡ + ãã®ä»–åŸä¾¡</span><span class="cost-value red" id="w-cafe-cogs">-Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” å®¶è³ƒï¼ˆgreekeeï¼‰</span><span class="cost-value red" id="w-rent">-Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” ãƒãƒªã‚¹ã‚¿æ¥­å‹™å§”è¨—è²»</span><span class="cost-value red" id="w-barista">-Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” æ¶ˆè€—å“ãƒ»é›‘è²»</span><span class="cost-value red" id="w-misc">-Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” é€æ–™ãƒ»é–¢ç¨</span><span class="cost-value red" id="w-shipping">-Â¥0</span></div>
            <div class="cost-row" style="border-top:2px solid var(--color-navy);padding-top:12px;margin-top:4px;"><span class="cost-label" style="font-weight:700;">ã‚«ãƒ•ã‚§äº‹æ¥­åˆ©ç›Š</span><span class="cost-value" id="w-cafe-profit" style="font-size:16px;">Â¥0</span></div>
            <div style="height:16px;"></div>
            <div class="cost-row"><span class="cost-label">ã‚°ãƒƒã‚ºå£²ä¸Š</span><span class="cost-value" id="w-goods-rev">Â¥0</span></div>
            <div class="cost-row"><span class="cost-label">ã€€â”” ã‚°ãƒƒã‚ºåŸä¾¡</span><span class="cost-value red" id="w-goods-cogs">-Â¥0</span></div>
            <div class="cost-row" style="border-top:2px solid var(--color-navy);padding-top:12px;margin-top:4px;"><span class="cost-label" style="font-weight:700;">ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š</span><span class="cost-value" id="w-goods-profit" style="font-size:16px;">Â¥0</span></div>
            <div class="cost-total">
                <div class="cost-row"><span class="cost-label">åˆè¨ˆäº‹æ¥­åˆ©ç›Š</span><span class="cost-value" id="w-total" style="font-size:20px;">Â¥0</span></div>
            </div>
            <div style="height:16px;"></div>
            <div style="margin-top: 20px; padding-top: 12px; border-top: 2px solid rgba(0,0,0,0.08);">
                <div class="control-group">
                    <div class="control-label"><span>S2 Fund Pool Rateï¼ˆS1ãƒ•ã‚§ãƒ¼ã‚ºï¼‰</span><span class="control-val" id="v-s2-pool-pct">100%</span></div>
                    <input type="range" id="s-s2-pool-pct" min="0" max="100" value="100" oninput="simulate()">
                </div>
                <div class="formula-box" id="w-s2-waterfall">
                    åˆè¨ˆäº‹æ¥­åˆ©ç›Š Â¥0 â†’ S2ãƒ—ãƒ¼ãƒ«ï¼ˆ100%ï¼‰= Â¥0 â†’ åˆ†é…å¯èƒ½åˆ©ç›Š = Â¥0
                </div>
            </div>
        </div>

    </div>

    <!-- ==================== TAB 3: 12-MONTH FORECAST ==================== -->
    <div class="tab-panel" id="tab-yearly">

        <div class="section-title">12-Month Forecast with S2 Fund Accumulation</div>

        <div class="note-box">
            ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…ƒã«ã€12ãƒ¶æœˆã®æˆé•·äºˆæ¸¬ã‚’è‡ªå‹•ç”Ÿæˆã€‚S2 Fund Pool ã®ç´¯ç©ã‚’è¿½è·¡ã—ã¦ã€æŠ•è³‡æº–å‚™çŠ¶æ³ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚
        </div>

        <div class="card-grid">
            <div class="card">
                <h3>ğŸ“ˆ æˆé•·ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                <div class="control-group">
                    <div class="control-label"><span>ã‚«ãƒ•ã‚§æ¯æ•° æœˆæ¬¡æˆé•·ç‡</span><span class="control-val" id="v-cafe-growth">5%</span></div>
                    <input type="range" id="s-cafe-growth" min="0" max="20" value="5" oninput="forecast()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>ã‚°ãƒƒã‚ºå£²ä¸Š æœˆæ¬¡æˆé•·ç‡</span><span class="control-val" id="v-goods-growth">8%</span></div>
                    <input type="range" id="s-goods-growth" min="0" max="30" value="8" oninput="forecast()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>ã‚«ãƒ•ã‚§æ¯æ•°ä¸Šé™ / æ—¥</span><span class="control-val" id="v-cups-cap">30</span></div>
                    <input type="range" id="s-cups-cap" min="15" max="50" value="30" oninput="forecast()">
                </div>
            </div>
            <div class="card">
                <h3>ğŸ¯ S2 Investment Target</h3>
                <div class="control-group">
                    <div class="control-label"><span>S2ç›®æ¨™é‡‘é¡</span><span class="control-val" id="v-s2-target">Â¥2,000,000</span></div>
                    <input type="range" id="s-s2-target" min="1000000" max="5000000" step="100000" value="2000000" oninput="forecast()">
                </div>
                <div class="control-group">
                    <div class="control-label"><span>S2 Pool Rateï¼ˆForecastç”¨ï¼‰</span><span class="control-val" id="v-s2-pool-forecast">100%</span></div>
                    <input type="range" id="s-s2-pool-forecast" min="0" max="100" value="100" oninput="forecast()">
                </div>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ“Š Year 1 Summary</h3>
            <div class="stat-row">
                <div class="stat-box">
                    <div class="stat-num" id="y-total-rev">â€”</div>
                    <div class="stat-label">å¹´é–“ç·å£²ä¸Š</div>
                </div>
                <div class="stat-box">
                    <div class="stat-num" id="y-total-profit">â€”</div>
                    <div class="stat-label">å¹´é–“äº‹æ¥­åˆ©ç›Š</div>
                </div>
                <div class="stat-box">
                    <div class="stat-num" id="y-s2-accumulated">â€”</div>
                    <div class="stat-label">S2 Fund ç´¯ç©</div>
                </div>
                <div class="stat-box">
                    <div class="stat-num" id="y-months-to-s2">â€”</div>
                    <div class="stat-label">S2 Ready ã¾ã§</div>
                </div>
            </div>
        </div>

        <div class="card" style="overflow-x:auto;">
            <h3>Monthly Breakdown</h3>
            <table class="monthly-table" id="forecast-table">
                <thead>
                    <tr>
                        <th>Month</th>
                        <th>æ¯æ•°/æ—¥</th>
                        <th>ã‚«ãƒ•ã‚§å£²ä¸Š</th>
                        <th>ã‚°ãƒƒã‚ºå£²ä¸Š</th>
                        <th>ç·å£²ä¸Š</th>
                        <th>äº‹æ¥­åˆ©ç›Š</th>
                        <th>S2 Fund</th>
                        <th>S2 ç´¯ç©</th>
                        <th>POPX</th>
                        <th>greekee</th>
                    </tr>
                </thead>
                <tbody id="forecast-body">
                </tbody>
            </table>
        </div>

    </div>

    <!-- ==================== TAB 4: INVESTMENT RECOVERY ==================== -->
    <div class="tab-panel" id="tab-recovery">

        <div class="section-title">Investment Recovery Phases</div>

        <div class="note-box">
            S1ï¼ˆé–“å€Ÿã‚Šï¼‰â†’ S2ï¼ˆ1åº—èˆ—ç›®ï¼‰â†’ S3ï¼ˆ2åº—èˆ—ç›®ï¼‰ã®3æ®µéšã®äº‹æ¥­æ‹¡å¤§ã¨æŠ•è³‡å›åãƒ•ã‚§ãƒ¼ã‚ºã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚
        </div>

        <div class="phase-timeline">
            <div class="phase-box s1">
                <h4>ğŸ“ S1: é–“å€Ÿã‚Šé‹å–¶</h4>
                <p>
                    <strong>ãƒ•ã‚§ãƒ¼ã‚ºï¼š</strong>äº‹æ¥­ã‚¹ã‚±ãƒ¼ãƒ«<br>
                    <strong>å ´æ‰€ï¼š</strong>greekeeä¸­ç›®é»’åº—èˆ—<br>
                    <strong>è³‡é‡‘ãƒ—ãƒ¼ãƒ«ï¼š</strong>äº‹æ¥­åˆ©ç›Šã®X%ã‚’ S2 æŠ•è³‡ã«é…åˆ†<br>
                    <strong>ç›®çš„ï¼š</strong>æœ€åˆã®12-18ãƒ¶æœˆã§Â¥2M ã‚’ç©ç«‹ã¦ã€S2 ã®ç¨®è³‡ã¨ã™ã‚‹
                </p>
            </div>
            <div class="phase-arrow">â†’</div>
            <div class="phase-box s2">
                <h4>ğŸª S2: 1åº—èˆ—ç›®</h4>
                <p>
                    <strong>ãƒ•ã‚§ãƒ¼ã‚ºï¼š</strong>æŠ•è³‡å›å<br>
                    <strong>æŠ•è³‡é¡ï¼š</strong>Â¥2,000,000<br>
                    <strong>é‹å–¶å½¢æ…‹ï¼š</strong>POPX own shop<br>
                    <strong>åç›ŠåŒ–ï¼š</strong>S2 ã‹ã‚‰ã®å£²ä¸Šã‚’ S1 æŠ•è³‡ã«å……å½“
                </p>
            </div>
            <div class="phase-arrow">â†’</div>
            <div class="phase-box s3">
                <h4>ğŸ¢ S3: 2åº—èˆ—ç›®</h4>
                <p>
                    <strong>ãƒ•ã‚§ãƒ¼ã‚ºï¼š</strong>é‹ç”¨ãƒ•ã‚§ãƒ¼ã‚º<br>
                    <strong>ä½“åˆ¶ï¼š</strong>S2 ã®é‹å–¶ãƒã‚¦ãƒã‚¦ã‚’2å·åº—ã«å±•é–‹<br>
                    <strong>ç›®æ¨™ï¼š</strong>è¤‡æ•°åº—èˆ—ã«ã‚ˆã‚‹å®‰å®šçš„ãªåˆ©ç›ŠåŒ–
                </p>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ“… Investment Recovery Timeline</h3>
            <div style="margin-top: 20px;">
                <div style="margin-bottom: 24px;">
                    <h4 style="font-family: var(--font-heading); font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 12px;">S1ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆMonth 1-12ï¼‰</h4>
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 16px; border-left: 4px solid var(--color-navy);">
                        <div style="font-size: 12px; color: var(--color-navy); line-height: 1.6;">
                            <strong>ç›®æ¨™:</strong> S2 Fund Â¥2,000,000 ã‚’ç©ç«‹ã¦<br>
                            <strong>é”æˆæ¡ä»¶:</strong> æœˆæ¬¡ Pool Rate ã«åŸºã¥ã„ã¦åˆè¨ˆäº‹æ¥­åˆ©ç›Šã‹ã‚‰ S2 ãƒ—ãƒ¼ãƒ«åˆ†ã‚’é…åˆ†<br>
                            <strong>äºˆæƒ³åˆ°é”æœˆï¼š</strong> <span id="recovery-s2-month" style="font-weight: 700; color: var(--color-cyan);">â€”</span><br>
                            <strong>äºˆæƒ³ S2 Ready æ—¥ï¼š</strong> <span id="recovery-s2-date" style="font-weight: 700; color: var(--color-cyan);">â€”</span>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <h4 style="font-family: var(--font-heading); font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 12px;">S2ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆMonth 13ä»¥é™ï¼‰</h4>
                    <div style="background: #f0f9ff; border-radius: 8px; padding: 16px; border-left: 4px solid var(--color-cyan);">
                        <div style="font-size: 12px; color: var(--color-navy); line-height: 1.6;">
                            <strong>æŠ•è³‡é¡ï¼š</strong> Â¥2,000,000<br>
                            <strong>é‹å–¶å½¢æ…‹ï¼š</strong> POPX ç‹¬ç«‹é‹å–¶åº—èˆ—<br>
                            <strong>å›åæ–¹é‡ï¼š</strong> S2 ã‹ã‚‰ã®æœˆæ¬¡å–¶æ¥­åˆ©ç›Šã§ Â¥2M ã‚’18-24ãƒ¶æœˆã§å›å<br>
                            <strong>æ¨å®šå›åæœˆæ•°ï¼š</strong> <span id="recovery-s2-payback" style="font-weight: 700; color: var(--color-cyan);">â€”</span> ãƒ¶æœˆ
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <h4 style="font-family: var(--font-heading); font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 12px;">S3ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆS2 å›åå¾Œï¼‰</h4>
                    <div style="background: #fdf2f8; border-radius: 8px; padding: 16px; border-left: 4px solid var(--color-pink);">
                        <div style="font-size: 12px; color: var(--color-navy); line-height: 1.6;">
                            <strong>äº‹æ¥­è¦æ¨¡ï¼š</strong> S1ãƒ»S2 å®Ÿç¸¾ã‚’ 2å·åº—ã«å±•é–‹<br>
                            <strong>é‹å–¶ä½“åˆ¶ï¼š</strong> S2 ã§ç¢ºç«‹ã—ãŸã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’æ‹¡å¼µ<br>
                            <strong>ç›®æ¨™ï¼š</strong> è¤‡æ•°åº—èˆ—ã«ã‚ˆã‚‹å®‰å®šçš„ãƒ»ç¶™ç¶šçš„ãªåˆ©ç›ŠåŒ–
                        </div>
                    </div>
                </div>
            </div>

            <div class="note-box" style="margin-top: 24px;">
                <strong>è£œè¶³ï¼š</strong>ä¸Šè¨˜ã¯ã€ŒS2 Fund ã‚’ç¾åœ¨ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ç©ç«‹ã¦ç¶šã‘ãŸå ´åˆã€ã®äºˆæƒ³ã§ã™ã€‚å®Ÿéš›ã® S2 æŠ•è³‡ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„åº—èˆ—é¸å®šã€å¸‚å ´ç’°å¢ƒã«ã‚ˆã‚Šèª¿æ•´ãŒå¿…è¦ã§ã™ã€‚
            </div>
        </div>

    </div>

</div>

<script>
// State
let goodsPattern = 'A'; // A or B
const popxGoodsPct = { A: 20, B: 70 };
const greekeeGoodsPct = { A: 80, B: 30 };

function fmt(n) {
    // Always show exact yen, never round to ä¸‡
    return 'Â¥' + Math.round(n).toLocaleString();
}

function fmtMan(n) {
    return 'Â¥' + (n / 10000).toFixed(1) + 'ä¸‡';
}

function showTab(id) {
    document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('tab-' + id).classList.add('active');
    event.target.classList.add('active');
    if (id === 'simulation') simulate();
    if (id === 'yearly') forecast();
    if (id === 'recovery') updateRecovery();
}

function setGoodsPattern(p) {
    goodsPattern = p;
    document.getElementById('btn-patA').classList.toggle('active', p === 'A');
    document.getElementById('btn-patB').classList.toggle('active', p === 'B');
    document.getElementById('pattern-desc').innerHTML = p === 'A'
        ? '<strong>Pattern Aï¼š</strong>POPXã¯ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã®ã¿ã€‚greekeeãŒã‚°ãƒƒã‚ºè£½é€ ãƒ»è²©å£²ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚'
        : '<strong>Pattern Bï¼š</strong>POPXãŒä¼ç”»ãƒ»åˆ¶ä½œãƒ»åœ¨åº«ãƒ»è²©å£²ã‚’å…¨ã¦æ‹…å½“ï¼ˆvanitystore / pattythreeæ´»ç”¨ï¼‰ã€‚';
    simulate();
}

function getSimParams() {
    return {
        days: +document.getElementById('s-days').value,
        cups: +document.getElementById('s-cups').value,
        price: +document.getElementById('s-price').value,
        bean: +document.getElementById('s-bean').value,
        otherCost: +document.getElementById('s-other').value,
        rent: +document.getElementById('s-rent').value,
        barista: +document.getElementById('s-barista').value,
        misc: +document.getElementById('s-misc').value,
        shipping: +document.getElementById('s-shipping').value,
        goodsRev: +document.getElementById('s-goods-rev').value,
        goodsCogs: +document.getElementById('s-goods-cogs').value / 100,
        s2PoolPct: +document.getElementById('s-s2-pool-pct').value / 100,
    };
}

function calcMonth(p, cupsOverride, goodsRevOverride) {
    const cups = cupsOverride || p.cups;
    const goodsRev = goodsRevOverride || p.goodsRev;

    const cafeRev = cups * p.price * p.days;
    const cafeCogs = cups * (p.bean + p.otherCost) * p.days;
    const fixedCosts = p.rent + p.barista + p.misc + p.shipping;
    const cafeProfit = cafeRev - cafeCogs - fixedCosts;

    const goodsCost = goodsRev * p.goodsCogs;
    const goodsProfit = goodsRev - goodsCost;

    const totalProfit = cafeProfit + goodsProfit;
    const s2Pool = totalProfit * p.s2PoolPct;
    const distributableProfit = totalProfit - s2Pool;

    const popxCafe = cafeProfit * 0.8;
    const gkCafe = cafeProfit * 0.2;
    const popxGoods = goodsProfit * (popxGoodsPct[goodsPattern] / 100);
    const gkGoods = goodsProfit * (greekeeGoodsPct[goodsPattern] / 100);

    return {
        cafeRev, cafeCogs, fixedCosts, cafeProfit,
        goodsRev, goodsCost, goodsProfit,
        totalProfit, s2Pool, distributableProfit,
        popxCafe, gkCafe, popxGoods, gkGoods,
        popxTotal: popxCafe + popxGoods,
        gkTotal: gkCafe + gkGoods + p.rent + p.barista,
        cups
    };
}

function simulate() {
    const p = getSimParams();

    // Update display values
    document.getElementById('v-days').textContent = p.days;
    document.getElementById('v-cups').textContent = p.cups;
    document.getElementById('v-price').textContent = 'Â¥' + p.price.toLocaleString();
    document.getElementById('v-bean').textContent = 'Â¥' + p.bean.toLocaleString();
    document.getElementById('v-other').textContent = 'Â¥' + p.otherCost.toLocaleString();
    document.getElementById('v-rent').textContent = 'Â¥' + p.rent.toLocaleString();
    document.getElementById('v-barista').textContent = 'Â¥' + p.barista.toLocaleString();
    document.getElementById('v-misc').textContent = 'Â¥' + p.misc.toLocaleString();
    document.getElementById('v-shipping').textContent = 'Â¥' + p.shipping.toLocaleString();
    document.getElementById('v-goods-rev').textContent = 'Â¥' + p.goodsRev.toLocaleString();
    document.getElementById('v-goods-cogs').textContent = Math.round(p.goodsCogs * 100) + '%';
    document.getElementById('v-s2-pool-pct').textContent = Math.round(p.s2PoolPct * 100) + '%';

    const r = calcMonth(p);

    // Update results
    const totalEl = document.getElementById('r-total');
    totalEl.textContent = fmt(r.totalProfit);
    totalEl.className = 'result-big ' + (r.totalProfit >= 0 ? 'positive' : 'negative');

    document.getElementById('r-cafe-profit').textContent = fmt(r.cafeProfit);
    document.getElementById('r-goods-profit').textContent = fmt(r.goodsProfit);

    // POPX with formulas
    const popxCafeFormula = `ã‚«ãƒ•ã‚§äº‹æ¥­åˆ©ç›Š ${fmt(r.cafeProfit)} Ã— 80% = ${fmt(r.popxCafe)}`;
    document.getElementById('f-popx-cafe-formula').textContent = popxCafeFormula;
    document.getElementById('r-popx-cafe').textContent = fmt(r.popxCafe);

    const popxGoodsPct = goodsPattern === 'A' ? 20 : 70;
    const popxGoodsFormula = `ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š ${fmt(r.goodsProfit)} Ã— ${popxGoodsPct}% = ${fmt(r.popxGoods)}`;
    document.getElementById('f-popx-goods-formula').textContent = popxGoodsFormula;
    document.getElementById('r-popx-goods').textContent = fmt(r.popxGoods);
    document.getElementById('r-popx-total').textContent = fmt(r.popxTotal);

    // greekee with formulas
    const gkCafeFormula = `ã‚«ãƒ•ã‚§äº‹æ¥­åˆ©ç›Š ${fmt(r.cafeProfit)} Ã— 20% = ${fmt(r.gkCafe)}`;
    document.getElementById('f-gk-cafe-formula').textContent = gkCafeFormula;
    document.getElementById('r-gk-cafe').textContent = fmt(r.gkCafe);

    const greekeeGoodsPct = goodsPattern === 'A' ? 80 : 30;
    const gkGoodsFormula = `ã‚°ãƒƒã‚ºäº‹æ¥­åˆ©ç›Š ${fmt(r.goodsProfit)} Ã— ${greekeeGoodsPct}% = ${fmt(r.gkGoods)}`;
    document.getElementById('f-gk-goods-formula').textContent = gkGoodsFormula;
    document.getElementById('r-gk-goods').textContent = fmt(r.gkGoods);
    document.getElementById('r-gk-rent').textContent = fmt(p.rent);
    document.getElementById('r-gk-barista').textContent = fmt(p.barista);
    document.getElementById('r-gk-total').textContent = fmt(r.gkTotal);

    // Waterfall
    document.getElementById('w-cafe-rev').textContent = fmt(r.cafeRev);
    document.getElementById('w-cafe-cogs').textContent = '-' + fmt(r.cafeCogs);
    document.getElementById('w-rent').textContent = '-' + fmt(p.rent);
    document.getElementById('w-barista').textContent = '-' + fmt(p.barista);
    document.getElementById('w-misc').textContent = '-' + fmt(p.misc);
    document.getElementById('w-shipping').textContent = '-' + fmt(p.shipping);
    const wpEl = document.getElementById('w-cafe-profit');
    wpEl.textContent = fmt(r.cafeProfit);
    wpEl.className = 'cost-value ' + (r.cafeProfit >= 0 ? 'green' : 'red');
    document.getElementById('w-goods-rev').textContent = fmt(r.goodsRev);
    document.getElementById('w-goods-cogs').textContent = '-' + fmt(r.goodsCost);
    const wgEl = document.getElementById('w-goods-profit');
    wgEl.textContent = fmt(r.goodsProfit);
    wgEl.className = 'cost-value ' + (r.goodsProfit >= 0 ? 'green' : 'red');
    const wtEl = document.getElementById('w-total');
    wtEl.textContent = fmt(r.totalProfit);
    wtEl.className = 'cost-value ' + (r.totalProfit >= 0 ? 'green' : 'red');

    // S2 Waterfall
    const s2Pct = Math.round(p.s2PoolPct * 100);
    document.getElementById('w-s2-waterfall').textContent =
        `åˆè¨ˆäº‹æ¥­åˆ©ç›Š ${fmt(r.totalProfit)} â†’ S2ãƒ—ãƒ¼ãƒ«ï¼ˆ${s2Pct}%ï¼‰= ${fmt(r.s2Pool)} â†’ åˆ†é…å¯èƒ½åˆ©ç›Š = ${fmt(r.distributableProfit)}`;
}

function forecast() {
    const p = getSimParams();
    const cafeGrowth = +document.getElementById('s-cafe-growth').value / 100;
    const goodsGrowth = +document.getElementById('s-goods-growth').value / 100;
    const cupsCap = +document.getElementById('s-cups-cap').value;
    const s2Target = +document.getElementById('s-s2-target').value;
    const s2PoolForecast = +document.getElementById('s-s2-pool-forecast').value / 100;

    document.getElementById('v-cafe-growth').textContent = Math.round(cafeGrowth * 100) + '%';
    document.getElementById('v-goods-growth').textContent = Math.round(goodsGrowth * 100) + '%';
    document.getElementById('v-cups-cap').textContent = cupsCap;
    document.getElementById('v-s2-target').textContent = 'Â¥' + s2Target.toLocaleString();
    document.getElementById('v-s2-pool-forecast').textContent = Math.round(s2PoolForecast * 100) + '%';

    let html = '';
    let totalRev = 0, totalProfit = 0, totalPopx = 0, totalGk = 0, s2Accumulated = 0;
    let s2ReadyMonth = null;
    const months = ['M1','M2','M3','M4','M5','M6','M7','M8','M9','M10','M11','M12'];

    for (let i = 0; i < 12; i++) {
        const cups = Math.min(Math.round(p.cups * Math.pow(1 + cafeGrowth, i)), cupsCap);
        const goodsRev = Math.round(p.goodsRev * Math.pow(1 + goodsGrowth, i));

        // Use forecast pool rate
        const pForecast = { ...p, s2PoolPct: s2PoolForecast };
        const r = calcMonth(pForecast, cups, goodsRev);

        totalRev += r.cafeRev + r.goodsRev;
        totalProfit += r.totalProfit;
        totalPopx += r.popxTotal;
        totalGk += r.gkTotal;
        s2Accumulated += r.s2Pool;

        // Check if S2 Ready this month
        let s2ReadyBadge = '';
        if (s2ReadyMonth === null && s2Accumulated >= s2Target) {
            s2ReadyMonth = i + 1;
            s2ReadyBadge = ' <span class="badge badge-s2-ready">S2 READY</span>';
        }

        const profitClass = r.totalProfit >= 0 ? 'positive' : 'negative';
        html += `<tr>
            <td>${months[i]}${s2ReadyBadge}</td>
            <td>${cups}</td>
            <td>${fmt(r.cafeRev)}</td>
            <td>${fmt(r.goodsRev)}</td>
            <td>${fmt(r.cafeRev + r.goodsRev)}</td>
            <td class="${profitClass}">${fmt(r.totalProfit)}</td>
            <td>${fmt(r.s2Pool)}</td>
            <td>${fmt(s2Accumulated)}</td>
            <td>${fmt(r.popxTotal)}</td>
            <td>${fmt(r.gkTotal)}</td>
        </tr>`;
    }

    // Total row
    html += `<tr>
        <td>TOTAL</td>
        <td>â€”</td>
        <td>â€”</td>
        <td>â€”</td>
        <td>${fmt(totalRev)}</td>
        <td class="${totalProfit >= 0 ? 'positive' : 'negative'}">${fmt(totalProfit)}</td>
        <td>${fmt(s2Accumulated)}</td>
        <td>${fmt(s2Accumulated)}</td>
        <td>${fmt(totalPopx)}</td>
        <td>${fmt(totalGk)}</td>
    </tr>`;

    document.getElementById('forecast-body').innerHTML = html;
    document.getElementById('y-total-rev').textContent = fmt(totalRev);
    document.getElementById('y-total-profit').textContent = fmt(totalProfit);
    document.getElementById('y-s2-accumulated').textContent = fmt(s2Accumulated);
    document.getElementById('y-months-to-s2').textContent = s2ReadyMonth ? `M${s2ReadyMonth}` : 'æœªé”';
    document.getElementById('y-popx-total').textContent = fmt(totalPopx);
    document.getElementById('y-gk-total').textContent = fmt(totalGk);
}

function updateRecovery() {
    const p = getSimParams();
    const s2Target = +document.getElementById('s-s2-target').value;
    const cafeGrowth = +document.getElementById('s-cafe-growth').value / 100;
    const goodsGrowth = +document.getElementById('s-goods-growth').value / 100;
    const cupsCap = +document.getElementById('s-cups-cap').value;
    const s2PoolForecast = +document.getElementById('s-s2-pool-forecast').value / 100;

    // Calculate months to S2 readiness
    let s2AccumulatedForecast = 0;
    let s2ReadyMonthNum = null;
    for (let i = 0; i < 24; i++) {
        const cups = Math.min(Math.round(p.cups * Math.pow(1 + cafeGrowth, i)), cupsCap);
        const goodsRev = Math.round(p.goodsRev * Math.pow(1 + goodsGrowth, i));
        const pForecast = { ...p, s2PoolPct: s2PoolForecast };
        const r = calcMonth(pForecast, cups, goodsRev);
        s2AccumulatedForecast += r.s2Pool;
        if (s2ReadyMonthNum === null && s2AccumulatedForecast >= s2Target) {
            s2ReadyMonthNum = i + 1;
            break;
        }
    }

    if (s2ReadyMonthNum) {
        document.getElementById('recovery-s2-month').textContent = `Month ${s2ReadyMonthNum}`;
        const startDate = new Date();
        const readyDate = new Date(startDate.getFullYear(), startDate.getMonth() + s2ReadyMonthNum, startDate.getDate());
        document.getElementById('recovery-s2-date').textContent = readyDate.toLocaleDateString('ja-JP');
    } else {
        document.getElementById('recovery-s2-month').textContent = 'æœªé”ï¼ˆ12ãƒ¶æœˆä»¥å†…ï¼‰';
        document.getElementById('recovery-s2-date').textContent = 'â€”';
    }

    // Estimate S2 payback: Assume S2 store profit is ~130% of S1 average
    // Get average S1 month profit
    let s1TotalProfit = 0;
    for (let i = 0; i < 12; i++) {
        const cups = Math.min(Math.round(p.cups * Math.pow(1 + cafeGrowth, i)), cupsCap);
        const goodsRev = Math.round(p.goodsRev * Math.pow(1 + goodsGrowth, i));
        const pForecast = { ...p, s2PoolPct: s2PoolForecast };
        const r = calcMonth(pForecast, cups, goodsRev);
        s1TotalProfit += r.totalProfit;
    }
    const s1AvgMonthProfit = s1TotalProfit / 12;
    const s2EstimateMonthProfit = s1AvgMonthProfit * 1.3;
    const s2PaybackMonths = Math.ceil(s2Target / s2EstimateMonthProfit);

    document.getElementById('recovery-s2-payback').textContent = Math.max(12, s2PaybackMonths);
}

// Init
simulate();
</script>
</body>
</html>
